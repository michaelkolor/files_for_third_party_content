if (self.CavalryLogger) { CavalryLogger.start_js(["j8uhS"]); }

__d("SwapButtonDEPRECATED",["Event","Arbiter","CSS","Focus"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k){this._swapperButton=i;this._swappeeButton=j;c("Event").listen(i,"click",this.swap.bind(this));if(k)c("Event").listen(j,"click",this.unswap.bind(this));c("Arbiter").subscribe("SwapButtonDEPRECATED/focusOnJoinButton",this.setFocusOnSwapper.bind(this),c("Arbiter").SUBSCRIBE_ALL)}Object.assign(h.prototype,{_swapperButton:null,_swappeeButton:null,swap:function i(j){c("CSS").hide(this._swapperButton);c("CSS").show(this._swappeeButton);j!==false&&c("Focus").setWithoutOutline(this._swappeeButton)},unswap:function i(j){c("CSS").show(this._swapperButton);c("CSS").hide(this._swappeeButton);j!==false&&c("Focus").setWithoutOutline(this._swapperButton)},toggle:function i(){c("CSS").toggle(this._swapperButton);c("CSS").toggle(this._swappeeButton)},setFocusOnSwapper:function i(){this._swapperButton.focus()}});f.exports=h}),null);
__d("XFollowPrivacyNuxLogViewAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/follow/follow_privacy/nux/log/view/",{})}),null);
__d("XPubcontentChainedSuggestionsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/chained_suggestions/",{pageid:{type:"String"},profileid:{type:"Int"},eh:{type:"Bool",defaultValue:false},friendid:{type:"Int"}})}),null);
__d("SubscribeButton",["Arbiter","AsyncRequest","Button","CSS","Event","TooltipData","XFollowPrivacyNuxLogViewAsyncController","XPubcontentChainedSuggestionsController"],(function a(b,c,d,e,f,g){__p&&__p();var h={SUBSCRIBED:"FollowingUser",UNSUBSCRIBED:"UnfollowingUser",_enable:function i(j){c("Button").setEnabled(j,true);c("TooltipData").remove(j)},_disable:function i(j,k){c("Button").setEnabled(j,false);if(k)c("TooltipData").set(j,k)},init:function i(j,k,l,m,n,o,p,q,r,s,t,u,v){__p&&__p();var w=!t&&!v,x=!(r===undefined||r===null);if(x&&!p&&!q)h._disable(k,r);c("Event").listen(k,"click",function(){c("Arbiter").inform(h.SUBSCRIBED,{profile_id:m,contextID:u,suppress:true});if(s){s.show();var y=c("XFollowPrivacyNuxLogViewAsyncController").getURIBuilder().getURI();new(c("AsyncRequest"))(y).send()}});c("Arbiter").subscribe(h.SUBSCRIBED,function(y,z){__p&&__p();if(m==z.profile_id){if(!n)l.suppressNextMouseEnter&&l.suppressNextMouseEnter();if(x){if(typeof z.connected!=="undefined")p=z.connected;if(p||q)h._enable(k)}if(z.focusOnClick!==undefined)w=z.focusOnClick;j.swap(w);if(o===true&&z.chaining!==false){var A=c("XPubcontentChainedSuggestionsController").getURIBuilder().setInt("profileid",m).getURI();new(c("AsyncRequest"))().setURI(A).send()}}});c("Arbiter").subscribe(h.UNSUBSCRIBED,function(y,z){__p&&__p();if(m==z.profile_id){j.unswap(w);l.hideFlyout&&l.hideFlyout();if(x){if(typeof z.connected!=="undefined")p=z.connected;if(!p&&!q)h._disable(k,r)}c("Arbiter").inform("SubMenu/Reset")}})},initSubscribe:function i(j,k){c("Event").listen(j,"click",function(){setTimeout(c("Arbiter").inform.bind(c("Arbiter"),h.SUBSCRIBED,{profile_id:k}),0)})},initUnsubscribe:function i(j,k,l){c("Event").listen(j,"click",function(){setTimeout(c("Arbiter").inform.bind(c("Arbiter"),h.UNSUBSCRIBED,{profile_id:k,contextID:l}),0)})},initSubscribeMenuItem:function i(j,k,l){c("CSS").hide(k);this._initMenuItem(j,k,l)},initUnsubscribeMenuItem:function i(j,k,l){c("CSS").hide(j);this._initMenuItem(j,k,l)},_initMenuItem:function i(j,k,l){this.initSubscribe(j,l);this.initUnsubscribe(k,l);c("Arbiter").subscribe(h.SUBSCRIBED,function(m,n){c("CSS").hide(j);c("CSS").show(k)});c("Arbiter").subscribe(h.UNSUBSCRIBED,function(m,n){c("CSS").hide(k);c("CSS").show(j)})}};f.exports=h}),null);
__d("DialogHideOnSuccess",["csx","cx","CSS"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k){"use strict";this._layer=k}j.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe("success",this._handle.bind(this))};j.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null};j.prototype._handle=function(k,event){"use strict";if(c("CSS").matchesSelector(event.getTarget(),"._s"))this._layer.hide()};Object.assign(j.prototype,{_subscription:null});f.exports=j}),null);
__d("ContextualLayerInlineTabOrder",["AccessibilityConfig","DOM","DOMTraverser","Event","Focus","Keys","Map","SubscriptionsHandler","TabbableElements","getOrCreateDOMID"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";__p&&__p();if(!c("AccessibilityConfig").a11yNUXDialog)return;this._layer=i;this._isSetup=false;this._ignoreFocus=false;this._layerFocused=true;this._layerRoot=this._layer.getContentRoot();this._layerID=c("getOrCreateDOMID")(this._layerRoot);this._mutedTabbables=new(c("Map"))([]);this._subscriptions=new(c("SubscriptionsHandler"))();this._tabbableLayerElements=[]}h.prototype.enable=function(){"use strict";if(!c("AccessibilityConfig").a11yNUXDialog)return;this._subscriptions.addSubscriptions(this._layer.subscribe("aftershow",this._onAfterShow.bind(this)),this._layer.subscribe("hide",this._onAfterHide.bind(this)));if(this._layer.isShown())this._onAfterShow()};h.prototype.disable=function(){"use strict";if(!c("AccessibilityConfig").a11yNUXDialog)return;this._subscriptions.release();this._isSetup=false};h.prototype._getContext=function(){"use strict";return this._layer.getCausalElement()};h.prototype._getContextOwns=function(){"use strict";var i=this._getContext();if(!i)return[];var j=(i.getAttribute("aria-owns")||"").trim();j=j?j.match(/[^ ]+/g):[];return j};h.prototype._identifyTabbableElements=function(){"use strict";this._tabbableLayerElements=c("TabbableElements").find(this._layerRoot);if(!this._tabbableLayerElements.length&&!this._mutedTabbables.size)this._layerRoot.setAttribute("tabindex","0");if(this._layerRoot.tabIndex>=0)this._tabbableLayerElements.unshift(this._layerRoot)};h.prototype._onAfterShow=function(){"use strict";this._setupTabBehavior();var i=this._getContext(),j=this._getContextOwns();if(i&&!j.includes(this._layerID)){j.push(this._layerID);i.setAttribute("aria-owns",j.join(" "))}};h.prototype._onAfterHide=function(){"use strict";var i=this._getContext();if(i){var j=this._getContextOwns(),k=j.indexOf(this._layerID);if(k>-1){j.splice(k,1);i.setAttribute("aria-owns",j.join(" "))}}};h.prototype._setupTabBehavior=function(){"use strict";if(!this._isSetup){var i=this._getContext();if(!this._layerRoot||!i)return;this._setupTabTriggers();this._setupTabToggle();this._isSetup=true}};h.prototype._setupTabTriggers=function(){"use strict";var i=this._getContext();if(!c("TabbableElements").isTabbable(i))i.setAttribute("tabindex","0");this._subscriptions.addSubscriptions(c("Event").listen(i,"keyup",this._checkNUXFocus.bind(this)),c("Event").listen(i,"keydown",this._checkNUXFocus.bind(this)),c("Event").listen(this._layerRoot,"keydown",this._checkContextFocus.bind(this)),c("Event").listen(this._layerRoot,"layerFocus",this._setNUXFocusStart.bind(this)),c("Event").listen(this._layerRoot,"layerFocusEnd",this._setNUXFocusEnd.bind(this)),c("Event").listen(this._layerRoot,"tempFocusIgnore",this._tempIgnoreFocus.bind(this)))};h.prototype._setupTabToggle=function(){"use strict";this._handleLayerBlur();this._subscriptions.addSubscriptions(c("Event").listen(document.documentElement,"click",this._checkForFocus.bind(this)),c("Event").listen(document.documentElement,"keydown",this._checkForFocus.bind(this)))};h.prototype._handleLayerBlur=function(){"use strict";__p&&__p();if(!this._layerFocused)return;this._identifyTabbableElements();this._tabbableLayerElements.forEach(function(i){if(!this._mutedTabbables.has(i)){var j=i.getAttribute("tabindex");i.setAttribute("tabindex","-1");this._mutedTabbables.set(i,j)}},this);this._layerFocused=false};h.prototype._handleLayerFocus=function(){"use strict";__p&&__p();if(this._layerFocused)return;for(var i=this._mutedTabbables,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}var m=l,n=m[0],o=m[1];if(o===null)n.removeAttribute("tabindex");else n.setAttribute("tabindex",o)}this._mutedTabbables.clear();this._layerFocused=true};h.prototype._checkNUXFocus=function(event){"use strict";__p&&__p();if(this._ignoreFocus){event.preventDefault();this._ignoreFocus=false;return}if(event.getTarget()!==this._getContext()||!this._layer.isShown())return;var i=c("Event").getKeyCode(event),j=this._getContextOwns();if(!j.length||i!==c("Keys").TAB)return;var k=event.getModifiers(),l=k.shift,m=j[0]===this._layerID,n=j[j.length-1]===this._layerID;if(event.type==="keydown"&&l&&n||event.type==="keyup"&&!l&&m){event.preventDefault();c("Event").fire(this._layerRoot,l?"layerFocusEnd":"layerFocus")}};h.prototype._setNUXFocusStart=function(){"use strict";this._handleLayerFocus();this._identifyTabbableElements();c("Focus").set(this._tabbableLayerElements[0])};h.prototype._setNUXFocusEnd=function(){"use strict";this._handleLayerFocus();this._identifyTabbableElements();c("Focus").set(this._tabbableLayerElements[this._tabbableLayerElements.length-1])};h.prototype._tempIgnoreFocus=function(){"use strict";this._ignoreFocus=true};h.prototype._checkContextFocus=function(event){"use strict";__p&&__p();var i=c("Event").getKeyCode(event),j=event.getModifiers(),k=j.shift;this._handleLayerFocus();this._identifyTabbableElements();if(!this._tabbableLayerElements.length||i!==c("Keys").TAB||!this._getContext())return;var l=this._tabbableLayerElements[0],m=this._tabbableLayerElements[this._tabbableLayerElements.length-1];if(event.getTarget()===m&&!k){if(this._setFocusAfterLayer())event.preventDefault()}else if(event.getTarget()===l&&k)if(this._setFocusBeforeLayer())event.preventDefault()};h.prototype._isTabbableNode=function(i){"use strict";return c("TabbableElements").isTabbable(i)&&!c("DOM").contains(this._layerRoot,i)};h.prototype._setFocusBeforeLayer=function(){"use strict";__p&&__p();var i=this._getContextOwns();if(!i||!i.length)return false;if(i[0]===this._layerID){var j=c("DOMTraverser").previousFilteredNode(document.body,this._getContext(),this._isTabbableNode.bind(this));c("Focus").set(j);return true}if(i.includes(this._layerID)){var k=i[i.indexOf(this._layerID)-1];return this._focusOnElement(k,true)}return false};h.prototype._setFocusAfterLayer=function(){"use strict";__p&&__p();var i=this._getContextOwns();if(!i||!i.length)return false;if(i[i.length-1]===this._layerID){this._refocusOnContext();return true}if(i.includes(this._layerID)){var j=i[i.indexOf(this._layerID)+1];return this._focusOnElement(j,false)}return false};h.prototype._focusOnElement=function(i,j){"use strict";var k=document.getElementById(i);if(!k)return false;c("Event").fire(k,j?"layerFocusEnd":"layerFocus");this._handleLayerBlur();return true};h.prototype._refocusOnContext=function(event){"use strict";__p&&__p();var i=this._getContext(),j=this._getContextOwns();c("Event").fire(document.getElementById(j[0]),"tempFocusIgnore");this._handleLayerBlur();if(i)if(i.tabIndex===-1){i.tabIndex=0;c("Focus").setWithoutOutline(i)}else c("Focus").set(i)};h.prototype._checkForFocus=function(event){"use strict";var i=event.getTarget(),j=this._layer.getContentRoot(),k=c("DOM").contains(j,i);if(!this._ignoreFocus&&!this._layerFocused&&k)this._handleLayerFocus();if(this._layerFocused&&!k)this._handleLayerBlur()};f.exports=h}),null);
__d("LayerDestroyOnHide",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this._layer=i}h.prototype.enable=function(){"use strict";var i=this._layer.destroy.bind(this._layer);this._subscription=this._layer.subscribe("hide",function(){setTimeout(i,0)})};h.prototype.disable=function(){"use strict";if(this._subscription){this._subscription.unsubscribe();this._subscription=null}};Object.assign(h.prototype,{_subscription:null});f.exports=h}),null);
__d("LayerRemoveOnHide",["DOM"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this._layer=i}h.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe("hide",c("DOM").remove.bind(null,this._layer.getRoot()))};h.prototype.disable=function(){"use strict";if(this._subscription){this._subscription.unsubscribe();this._subscription=null}};Object.assign(h.prototype,{_subscription:null});f.exports=h}),null);
__d("XUIAmbientNUXTheme",["cx"],(function a(b,c,d,e,f,g,h){var i={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};f.exports=i}),null);